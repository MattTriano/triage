# postmodel-analysis

Library for `triage` post-modeling routines. This library is the last step of
the `triage` modeling pipeline. This library will use the selected
`model_group_id`'s selected from Audition, and will compare each model and
retrieve basic metric of each one. The ultimate goal of this post-modeling
process is to decide the final model that you will select. 

## Components

We can analyze models by getting its individual metrics or comparing between
them. The first step would include a set of basic metric for each model, such
as: 
 - [x] Score distributions: compare the distributions of labels across the
   predicted score.
 - [x] Feature importances: where possible, `triage` will calculate the general
   feature importances for each model (for Random Forest and other decision
   trees, this process is made extracting the `_feature_importances` from
   `sklearn`). 
 - [x] Model metrics: ROC Curve, Precision vs. Recall, Recall and FDR vs.
   Depth

The second step comprises different ways of comparing models: 
* List comparisons: Compare list generated by each model:
 - [x] Jaccard Similarity over *top_k* predictions and features
 - [x] Overall rank correlation over *top_k* predictions and features
 - [ ] Rank Correlation where we can label [0 vs. 1]
 - [ ] KL divergence to compare distributions in feature importances

Postmodeling also involves the correction of scores and a more in-depth analysis
of the selected models. Some of this tasks can be also achieved using this
library, like:

 - [ ] Probability Calibration: probability calculations for score deciles
 - [ ] Error analysis: Run DT on the model residuals to detect features where
   the model is making errors (?). 
 - [ ] Crosstabs: t-test comparing feature values between classified groups.
 - [ ] Bias report: *Aequitas* 

A [notebook](https://github.com/dssg/triage/blob/cli_postmodeling/src/triage/component/postmodeling/contrast/postmodeling_tutorial.ipynb)
is included with a tutorial of the library using the [Dirty
Duck](https://github.com/dssg/dirtyduck) data. 

